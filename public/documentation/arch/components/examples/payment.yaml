#    Copyright (C) 2022 owner Roman Piontik R.Piontik@mail.ru
#
#    Licensed under the Apache License, Version 2.0 (the "License");
#    you may not use this file except in compliance with the License.
#    You may obtain a copy of the License at
#
#    http://www.apache.org/licenses/LICENSE-2.0
#
#    In any derivative products, you must retain the information of
#    owner of the original code and provide clear attribution to the project
#
#    https://dochub.info
#
#    The use of this product or its derivatives for any purpose cannot be a secret.
#
#    Unless required by applicable law or agreed to in writing, software
#    distributed under the License is distributed on an "AS IS" BASIS,
#    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#    See the License for the specific language governing permissions and
#    limitations under the License.
#
#  Maintainers:
#    R.Piontik <r.piontik@mail.ru>
#
#  Contributors:
#    R.Piontik <r.piontik@mail.ru> - 2022

components:
  #***********************************************************
  #               Компонент-пример сервиса оплаты
  #***********************************************************
  dochub.examples.payment:
    title: Сервис оплаты   
    entity: component
    expert: R.Piontik
    technologies:
      - SberPay
      - Go
    asyncapi:     # Кастомное поле, созданное для примера сборки контрактов из архитектуры через шаблоны
                  # см. https://dochub.info/docs/dochub.templates
      servers:
        payments:
          url: mqtt://pay.host.net
          protocol: mqtt
          description: Payment gateway
      channels:
        pay/payment:
          subscribe:
            operationId: emitPayment
            message:
              $ref: "#/components/messages/Payment"
      components:
        messages:
          Payment:
            name: payment
            title: Оплата
            summary: Сообщение по оплате
            contentType: application/json
            payload:
              $ref: "#/components/schemas/payment"
        schemas:
          payment:
            type: object
            properties:
              account:
                type: string
                description: "Номер счета"
              curr:
                type: string
                description: "Валюта"
              value:
                type: number
                description: "Сумма"
              createdAt:
                type: string
                format: date-time
                description: "Момент создания"
    openapi: # Кастомное поле, созданное для примера сборки контрактов из архитектуры через шаблоны
             # см. https://dochub.info/docs/dochub.templates
      paths:
        /payments:
          get:
            summary: Получение списка счетов
            responses:
              '200':    # status code
                content:
                  application/json:
                    schema:
                      type: array
                      items:
                        type: string
                        format: uid
